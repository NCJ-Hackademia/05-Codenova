<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Design Form Portal - Live N Fit</title>
    <meta name="description" content="Transform your dream home vision into reality with our conversational design wizard. Tell us about your family and lifestyle to create your perfect personalized home design." />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Flivenfit5572back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.6"></script>
<!-- Family Size Grid Example -->
<style>
.family-grid-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.family-grid-count {
    min-width: 2rem;
    text-align: center;
    font-size: 1.2rem;
}
.family-grid-btn {
    background: #667eea;
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 2rem;
    height: 2rem;
    font-size: 1.2rem;
    cursor: pointer;
    transition: background 0.2s;
}
.family-grid-btn:active {
    background: #4c51bf;
}
.slider-container {
    position: relative;
    padding-top: 1rem;
}
.slider {
    -webkit-appearance: none;
    width: 100%;
    height: 8px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    -webkit-transition: .2s;
    transition: opacity .2s;
    border-radius: 5px;
}
.slider:hover {
    opacity: 1;
}
.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px;
    height: 24px;
    background: #667eea;
    cursor: pointer;
    border-radius: 50%;
}
.slider::-moz-range-thumb {
    width: 24px;
    height: 24px;
    background: #667eea;
    cursor: pointer;
    border-radius: 50%;
}
.slider-value {
    text-align: center;
    margin-top: 0.5rem;
    font-weight: 600;
    font-size: 1.1rem;
    color: #4c51bf;
}
</style>
</head>
<body class="bg-background font-body">
    <!-- Navigation Header -->
    <nav class="bg-surface shadow-card sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="{{url_for('homepage')}}" class="flex flex-col items-start space-y-0.5 space-x-2">
        <span class="flex items-center space-x-2">
            <svg class="w-8 h-8 text-secondary" viewBox="0 0 32 32" fill="currentColor">
                <path d="M16 2L4 12v18h8v-8h8v8h8V12L16 2zm0 4.5L24 14v14h-4v-8H12v8H8V14l8-7.5z"/>
                <circle cx="16" cy="18" r="2" fill="currentColor"/>
            </svg>
            <span class="font-headline font-bold text-xl text-primary">Live N Fit</span>
        </span>
        <span class="text-sm text-text-secondary font-medium mt-1">
            {% if user_name %}
                Welcome {{ user_name }}!
            {% endif %}
        </span>
    </a>
                </div>
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="{{ url_for('homepage') }}" class="text-text-secondary hover:text-primary transition-quick">Home</a>
                    <a href="{{ url_for('about') }}" class="text-text-secondary hover:text-primary transition-quick">About</a>
                    <a href="{{ url_for('design_portal') }}" class="text-primary font-semibold border-b-2 border-secondary">Design</a>
                    <a href="{{ url_for('design_2d') }}" class="text-text-secondary hover:text-primary transition-quick">2D Design</a>
                    <a href="{{ url_for('pricing') }}" class="text-text-secondary hover:text-primary transition-quick">Pricing</a>
                    <a href="{{ url_for('designs_gallery') }}" class="text-text-secondary hover:text-primary transition-quick">My Designs</a>
                    <a href="{{ url_for('tech_deep_dive') }}" class="text-text-secondary hover:text-primary transition-quick">Technology</a>
                    <a href="{{ url_for('contact') }}" class="text-text-secondary hover:text-primary transition-quick">Contact</a>
                </div>
                <!-- Save Progress Button -->
                <div class="hidden md:block">
                    <button class="text-secondary font-semibold hover:text-secondary-600 transition-quick">
                        Save Progress
                    </button>
                </div>
                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-primary hover:text-secondary transition-quick">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-surface border-t border-border">
            <div class="px-4 py-2 space-y-2">
                <a href="{{ url_for('homepage') }}" class="block py-2 text-text-secondary hover:text-primary transition-quick">Home</a>
                <a href="{{ url_for('about') }}" class="block py-2 text-text-secondary hover:text-primary transition-quick">About</a>
                <a href="{{ url_for('design_portal') }}" class="block py-2 text-primary font-semibold">Design</a>
                <a href="{{ url_for('design_2d') }}" class="block py-2 text-text-secondary hover:text-primary transition-quick">2D-design</a>
                <a href="{{ url_for('pricing') }}" class="block py-2 text-text-secondary hover:text-primary transition-quick">Pricing</a>
                <a href="{{ url_for('designs_gallery') }}" class="block py-2 text-text-secondary hover:text-primary transition-quick">My Designs</a>
                <a href="{{ url_for('tech_deep_dive') }}" class="block py-2 text-text-secondary hover:text-primary transition-quick">Technology</a>
                <a href="{{ url_for('contact') }}" class="block py-2 text-text-secondary hover:text-primary transition-quick">Contact</a>
                <button class="block py-2 mt-4 text-secondary font-semibold">Save Progress</button>
            </div>
        </div>
    </nav>

    <!-- Progress Header -->
    <section class="bg-gradient-to-r from-primary-50 to-secondary-50 py-6">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between mb-4">
                <h1 class="text-heading font-headline font-bold text-primary">Let's design your perfect home together</h1>
                <div class="text-sm text-text-secondary">
                    <span class="font-semibold">Step <span id="current-step">1</span> of 2</span>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="progress-bar" class="bg-secondary h-2 rounded-full transition-smooth" style="width: 50%"></div>
            </div>
            
            <!-- Progress Steps -->
            <div class="flex justify-between mt-4">
                <div class="flex items-center space-x-2">
                    <div class="progress-step active" id="step-1">1</div>
                    <span class="text-sm font-semibold text-primary">Size & Style</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="progress-step inactive" id="step-2">2</div>
                    <span class="text-sm text-text-secondary">Family Dynamics</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Form Container -->
    <section class="py-12 bg-background">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="mb-8">
                        {% for category, message in messages %}
                            <div class="p-4 rounded-lg 
                                {% if category == 'success' %} bg-green-100 border border-green-200 text-green-800 
                                {% elif category == 'danger' %} bg-red-100 border border-red-200 text-red-800 
                                {% else %} bg-blue-100 border border-blue-200 text-blue-800 
                                {% endif %}"
                                 role="alert">
                                {{ message }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            
            <form id="design-form" method="POST" action="{{ url_for('design_portal') }}" class="space-y-8">
                
                <!-- Section 1: Size & Floor Plan -->
                <div id="section-1" class="form-section active">
                    <div class="card">
                        <div class="mb-8">
                            <h2 class="text-display font-headline font-bold text-primary mb-4">Choose your home's footprint</h2>
                            <p class="text-body-lg text-text-secondary">Let's start with the basics. How much space do you envision for your new home?</p>
                        </div>
                        
                        <!-- Preferred home size -->
                        <div class="mb-8">
                            <label class="block text-lg font-semibold text-primary mb-4">Preferred home size</label>
                            <div class="slider-container">
                                <div class="flex items-center gap-4">
                                    <input type="range" min="1000" max="10000" value="3000" class="slider flex-1" id="sqft-slider" step="1">
                                    <input type="number" id="sqft-input" min="1000" max="10000" value="3000" step="1" class="w-28 p-2 border-2 border-border rounded-lg text-center">
                                </div>
                                <div id="slider-value" class="slider-value">3000 sq ft</div>
                            </div>
                        </div>

                        <!-- Number of Floors -->
                        <div class="mb-8">
                            <label class="block text-lg font-semibold text-primary mb-4">Number of floors</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <button type="button" class="floor-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="1">
                                    <div class="font-semibold">1 Floor</div>
                                </button>
                                <button type="button" class="floor-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="2">
                                    <div class="font-semibold">2 Floors</div>
                                </button>
                                <button type="button" class="floor-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="3">
                                    <div class="font-semibold">3 Floors</div>
                                </button>
                                <button type="button" class="floor-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="4+">
                                    <div class="font-semibold">4+ Floors</div>
                                </button>
                            </div>
                            <div id="floors-dropdown-container" class="hidden mt-4">
                                <label for="floors-dropdown" class="block text-lg font-semibold text-primary mb-2">Select number of floors</label>
                                <select id="floors-dropdown" class="w-full p-2 border-2 border-border rounded-lg">
                                    <!-- Options will be populated by JavaScript -->
                                </select>
                            </div>
                        </div>

                        <!-- Design Style -->
                        <div class="mb-8">
                            <label class="block text-lg font-semibold text-primary mb-4">Which design style speaks to you?</label>
                            <div class="grid md:grid-cols-3 gap-4">
                                <button type="button" class="style-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="modern">
                                    <div class="aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-4 overflow-hidden">
                                        <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?q=80&w=2158&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Modern Style" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2016/11/18/17/46/house-1836070_1280.jpg'; this.onerror=null;" />
                                    </div>
                                    <div class="font-semibold">Modern</div>
                                    <div class="text-sm text-text-secondary">Clean lines, minimal</div>
                                </button>
                                <button type="button" class="style-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="traditional">
                                    <div class="aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-4 overflow-hidden">
                                        <img src="https://images.pexels.com/photos/1396122/pexels-photo-1396122.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Traditional Style" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2016/11/18/17/46/house-1836070_1280.jpg'; this.onerror=null;" />
                                    </div>
                                    <div class="font-semibold">Traditional</div>
                                    <div class="text-sm text-text-secondary">Classic, timeless</div>
                                </button>
                                <button type="button" class="style-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="contemporary">
                                    <div class="aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-4 overflow-hidden">
                                        <img src="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Contemporary Style" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1586023492125-27b2c045efd7?q=80&w=2158&auto=format&fit=crop'; this.onerror=null;" />
                                    </div>
                                    <div class="font-semibold">Contemporary</div>
                                    <div class="text-sm text-text-secondary">Current, updated</div>
                                </button>
                                <button type="button" class="style-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="farmhouse">
                                    <div class="aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-4 overflow-hidden">
                                        <img src="https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?q=80&w=2074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Farmhouse Style" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2016/11/18/17/46/house-1836070_1280.jpg'; this.onerror=null;" />
                                    </div>
                                    <div class="font-semibold">Farmhouse</div>
                                    <div class="text-sm text-text-secondary">Rustic, cozy</div>
                                </button>
                                <button type="button" class="style-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="industrial">
                                    <div class="aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-4 overflow-hidden">
                                        <img src="https://images.pexels.com/photos/1571460/pexels-photo-1571460.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Industrial Style" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2017/03/22/17/39/kitchen-2165756_1280.jpg'; this.onerror=null;" />
                                    </div>
                                    <div class="font-semibold">Industrial</div>
                                    <div class="text-sm text-text-secondary">Urban, edgy</div>
                                </button>
                                <button type="button" class="style-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="transitional">
                                    <div class="aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-4 overflow-hidden">
                                        <img src="https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?q=80&w=2075&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Transitional Style" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2016/11/18/17/46/house-1836070_1280.jpg'; this.onerror=null;" />
                                    </div>
                                    <div class="font-semibold">Transitional</div>
                                    <div class="text-sm text-text-secondary">Blend of styles</div>
                                </button>
                            </div>
                        </div>
                        
                        
                    </div>
                </div>
                
                <!-- Section 2: Family Dynamics -->
                <div id="section-2" class="form-section hidden">
                    <div class="card">
                        <div class="mb-8">
                            <h2 class="text-display font-headline font-bold text-primary mb-4">Tell us about your family</h2>
                            <p class="text-body-lg text-text-secondary">Understanding how your family lives and connects helps us create spaces that truly work for you.</p>
                        </div>
                        
                        <!-- Family Size -->
                        <div class="mb-8">
                            <label class="block text-lg font-semibold text-primary mb-4">How many people live in your home?</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <button type="button" class="family-size-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="1-2">
                                    <div class="text-2xl mb-2">üë´</div>
                                    <div class="font-semibold">1-2 people</div>
                                    <div class="text-sm text-text-secondary">Couple or individual</div>
                                </button>
                                <button type="button" class="family-size-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="3-4">
                                    <div class="text-2xl mb-2">üë®‚Äçüë©‚Äçüëß</div>
                                    <div class="font-semibold">3-4 people</div>
                                    <div class="text-sm text-text-secondary">Small family</div>
                                </button>
                                <button type="button" class="family-size-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="5-6">
                                    <div class="text-2xl mb-2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                                    <div class="font-semibold">5-6 people</div>
                                    <div class="text-sm text-text-secondary">Growing family</div>
                                </button>
                                <button type="button" class="family-size-btn p-6 border-2 border-border rounded-lg hover:border-secondary transition-quick text-center" data-value="7+">
                                    <div class="text-2xl mb-2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶‚Äçüë∂</div>
                                    <div class="font-semibold">7+ people</div>
                                    <div class="text-sm text-text-secondary">Large family</div>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Family Composition Grid -->
                        <div class="mb-8">
                            <label class="block text-lg font-semibold text-primary mb-4">Specify your family composition:</label>
                            <div class="space-y-4">
                                <!-- Children -->
                                <div class="composition-item p-4 border-2 border-border rounded-lg flex justify-between items-center hover:border-secondary transition-quick">
                                    <div class="font-semibold text-primary">Children</div>
                                    <div class="family-grid-controls">
                                        <button type="button" class="family-grid-btn" onclick="updateCount('children-count', -1)">-</button>
                                        <span id="children-count" class="family-grid-count">0</span>
                                        <button type="button" class="family-grid-btn" onclick="updateCount('children-count', 1)">+</button>
                                    </div>
                                </div>
                                <!-- Separate Rooms for Children -->
                                <div id="separate-rooms-container" class="composition-item p-4 border-2 border-border rounded-lg mt-4 hidden">
                                    <div class="font-semibold text-primary">Do children need separate rooms?</div>
                                    <div class="flex gap-4">
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="separate_rooms" value="yes" class="form-radio">
                                            <span>Yes</span>
                                        </label>
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="radio" name="separate_rooms" value="no" class="form-radio">
                                            <span>No</span>
                                        </label>
                                    </div>
                                </div>
                                <!-- Couples -->
                                <div class="composition-item p-4 border-2 border-border rounded-lg flex justify-between items-center hover:border-secondary transition-quick">
                                    <div class="font-semibold text-primary">Couples</div>
                                    <div class="family-grid-controls">
                                        <button type="button" class="family-grid-btn" onclick="updateCount('couples-count', -1)">-</button>
                                        <span id="couples-count" class="family-grid-count">0</span>
                                        <button type="button" class="family-grid-btn" onclick="updateCount('couples-count', 1)">+</button>
                                    </div>
                                </div>
                                <!-- Singles -->
                                <div class="composition-item p-4 border-2 border-border rounded-lg flex justify-between items-center hover:border-secondary transition-quick">
                                    <div class="font-semibold text-primary">Singles</div>
                                    <div class="family-grid-controls">
                                        <button type="button" class="family-grid-btn" onclick="updateCount('singles-count', -1)">-</button>
                                        <span id="singles-count" class="family-grid-count">0</span>
                                        <button type="button" class="family-grid-btn" onclick="updateCount('singles-count', 1)">+</button>
                                </div>
                            </div>
                            <div id="composition-warning" class="hidden mt-2 text-sm text-red-600"></div>
                        </div>
                        </div>
                        
                        
                    
                        
                    </div>
                </div>


                <!-- Navigation Buttons -->
                <div class="flex justify-between items-center pt-8">
                    <button type="button" id="prev-btn" class="btn-secondary hidden">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                        Previous
                    </button>
                    
                    <div class="flex space-x-4">
                        <button type="button" id="save-draft-btn" class="text-text-secondary hover:text-primary transition-quick">
                            Save as Draft
                        </button>
                        <button type="button" id="next-btn" class="btn-primary">
                            Next Step
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                        <button type="submit" id="generate-design-btn" class="btn-primary">
                            Generate My Design
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Help & Support -->
    <section class="py-12 bg-surface">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-8">
                <h3 class="text-heading font-headline font-bold text-primary mb-4">Need help with your design?</h3>
                <p class="text-body text-text-secondary">Our design experts are here to help you create the perfect home for your family.</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
                <div class="text-center">
                    <div class="w-12 h-12 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                    </div>
                    <h4 class="font-semibold text-primary mb-2">Live Chat Support</h4>
                    <p class="text-sm text-text-secondary">Get instant help from our design team</p>
                    <button class="text-secondary hover:text-secondary-600 text-sm font-semibold mt-2">Start Chat</button>
                </div>
                
                <div class="text-center">
                    <div class="w-12 h-12 bg-accent rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                    </div>
                    <h4 class="font-semibold text-primary mb-2">Phone Consultation</h4>
                    <p class="text-sm text-text-secondary">Schedule a call with a design expert</p>
                    <button class="text-secondary hover:text-secondary-600 text-sm font-semibold mt-2">Book Call</button>
                </div>
                
                <div class="text-center">
                    <div class="w-12 h-12 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <h4 class="font-semibold text-primary mb-2">Design Guide</h4>
                    <p class="text-sm text-text-secondary">Download our comprehensive planning guide</p>
                    <button class="text-secondary hover:text-secondary-600 text-sm font-semibold mt-2">Download PDF</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-primary-900 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Company Info -->
                <div class="space-y-4">
                    <div class="flex items-center space-x-2">
                        <svg class="w-8 h-8 text-secondary" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2L4 12v18h8v-8h8v8h8V12L16 2zm0 4.5L24 14v14h-4v-8H12v8H8V14l8-7.5z"/>
                            <circle cx="16" cy="18" r="2" fill="currentColor"/>
                        </svg>
                        <span class="font-headline font-bold text-xl">Live N Fit</span>
                    </div>
                    <p class="text-gray-300 text-sm">
                        Transforming dream homes into reality through AI-powered design intelligence and immersive D visualization.
                    </p>
                    <div class="flex space-x-4">
                        <a href="javascript:void(0)" class="text-gray-400 hover:text-secondary transition-quick">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M20 10c0-5.523-4.477-10-10-10S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z" clip-rule="evenodd"/>
                        </a>
                        <a href="javascript:void(0)" class="text-gray-400 hover:text-secondary transition-quick">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.616 11.616 0 006.29 1.84"/>
                        </a>
                        <a href="javascript:void(0)" class="text-gray-400 hover:text-secondary transition-quick">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.338 16.338H13.67V12.16c0-.995-.017-2.277-1.387-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248H8.014v-8.59h2.559v1.174h.037c.356-.675 1.227-1.387 2.526-1.387 2.703 0 3.203 1.778 3.203 4.092v4.711zM5.005 6.575a1.548 1.548 0 11-.003-3.096 1.548 1.548 0 01.003 3.096zm-1.337 9.763H6.34v-8.59H3.667v8.59zM17.668 1H2.328C1.595 1 1 1.581 1 2.298v15.403C1 18.418 1.595 19 2.328 19h15.34c.734 0 1.332-.582 1.332-1.299V2.298C19 1.581 18.402 1 17.668 1z" clip-rule="evenodd"/>
                        </a>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h3 class="font-headline font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="{{ url_for('homepage') }}" class="text-gray-300 hover:text-white transition-quick">Home</a></li>
                        <li><a href="{{ url_for('design_portal') }}" class="text-gray-300 hover:text-white transition-quick">Design Portal</a></li>
                        <li><a href="{{ url_for('designs_gallery') }}" class="text-gray-300 hover:text-white transition-quick">My Designs</a></li>
                        <li><a href="{{ url_for('about') }}" class="text-gray-300 hover:text-white transition-quick">About</a></li>
                    </ul>
                </div>
                
                <!-- Technology -->
                <div>
                    <h3 class="font-headline font-bold mb-4">Technology</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="{{ url_for('tech_deep_dive') }}" class="text-gray-300 hover:text-white transition-quick">AI Technology</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">2D Design</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">Cost Analysis</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">Smart Planning</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">API Access</a></li>
                    </ul>
                </div>
                
                <!-- Support -->
                <div>
                    <h3 class="font-headline font-bold mb-4">Support</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">Help Center</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">Contact Us</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">Design Consultation</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">Community Forum</a></li>
                        <li><a href="javascript:void(0)" class="text-gray-300 hover:text-white transition-quick">System Status</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-primary-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400 text-sm">
                    ¬© 2025 Live N Fit. All Rights Reserved.
                </p>
                <div class="flex space-x-6 mt-4 md:mt-0">
                    <a href="javascript:void(0)" class="text-gray-400 hover:text-white text-sm transition-quick">Privacy Policy</a>
                    <a href="javascript:void(0)" class="text-gray-400 hover:text-white text-sm transition-quick">Terms of Service</a>
                    <a href="javascript:void(0)" class="text-gray-400 hover:text-white text-sm transition-quick">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Form Interaction Script -->
    <script>
        // Form state management
        let currentStep = 1;
        const totalSteps = 2;
        let formData = {};

        // DOM Elements
        const sqftSlider = document.getElementById('sqft-slider');
        const sliderValue = document.getElementById('slider-value');
        const sqftInput = document.getElementById('sqft-input');

        // Counter for family composition
        function updateCount(elementId, change) {
            const countElement = document.getElementById(elementId);
            let count = parseInt(countElement.textContent, 10);
            count = Math.max(0, count + change);
            countElement.textContent = count;

            const container = countElement.closest('.composition-item');
            if (count > 0) {
                container.classList.add('border-secondary', 'bg-secondary-50');
                container.classList.remove('border-border');
            } else {
                container.classList.remove('border-secondary', 'bg-secondary-50');
                container.classList.add('border-border');
            }
            
            if (elementId === 'children-count') {
                const separateRoomsContainer = document.getElementById('separate-rooms-container');
                if (count > 1) {
                    separateRoomsContainer.classList.remove('hidden');
                } else {
                    separateRoomsContainer.classList.add('hidden');
                    const radios = document.getElementsByName('separate_rooms');
                    radios.forEach(radio => radio.checked = false);
                    delete formData['separate_rooms'];
                }
            }

            formData[elementId] = count;
            showAISuggestion();

            // Add this line:
            updateFamilySizeFromComposition();
        }

        // Mobile menu functionality
        document.getElementById('mobile-menu-btn').addEventListener('click', function() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Button selection handlers
        function setupButtonSelection(buttonClass, dataAttribute, callback) {
            document.querySelectorAll(`.${buttonClass}`).forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll(`.${buttonClass}`).forEach(btn => {
                        btn.classList.remove('border-secondary', 'bg-secondary-50');
                        btn.classList.add('border-border');
                    });
                    this.classList.remove('border-border');
                    this.classList.add('border-secondary', 'bg-secondary-50');
                    
                    const value = this.getAttribute(dataAttribute);
                    formData[buttonClass] = value;
                    
                    if (callback) callback(value);
                    showAISuggestion();
                });
            });
        }

        // Slider for square footage
        function updateSqftValue(value) {
            if (!sqftSlider || !sliderValue || !sqftInput) return;
            const numValue = parseInt(value, 10);
            
            sqftSlider.value = numValue;
            sqftInput.value = numValue;
            
            if (numValue > 10000) {
                sliderValue.textContent = '10000+ sq ft';
                formData['size-btn'] = '10000+';
            } else {
                sliderValue.textContent = `${numValue} sq ft`;
                formData['size-btn'] = numValue;
            }
        }

        // Show AI suggestions based on current step and selections
        function showAISuggestion() {
            const suggestions = { 1: document.getElementById('ai-suggestion-1'), 2: document.getElementById('ai-suggestion-2') };
            if (suggestions[currentStep]) {
                suggestions[currentStep].classList.remove('hidden');
            }
        }

        // Navigation functions
        function showStep(step) {
            document.querySelectorAll('.form-section').forEach(section => section.classList.add('hidden', 'active'));
            const currentSection = document.getElementById(`section-${step}`);
            if (currentSection) {
                currentSection.classList.remove('hidden');
                currentSection.classList.add('active');
            }
            updateProgress(step);
            updateNavigationButtons(step);
        }

        function updateProgress(step) {
            currentStep = step;
            document.getElementById('current-step').textContent = step;
            document.getElementById('progress-bar').style.width = `${(step / totalSteps) * 100}%`;
            
            for (let i = 1; i <= totalSteps; i++) {
                const stepElement = document.getElementById(`step-${i}`);
                const stepText = stepElement.parentElement.querySelector('span');
                if (i < step) {
                    stepElement.className = 'progress-step completed';
                    stepText.className = 'text-sm font-semibold text-success';
                } else if (i === step) {
                    stepElement.className = 'progress-step active';
                    stepText.className = 'text-sm font-semibold text-primary';
                } else {
                    stepElement.className = 'progress-step inactive';
                    stepText.className = 'text-sm text-text-secondary';
                }
            }
        }

        function updateNavigationButtons(step) {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const generateBtn = document.getElementById('generate-design-btn');
            prevBtn.classList.toggle('hidden', step <= 1);
            nextBtn.classList.toggle('hidden', step >= totalSteps);
            generateBtn.classList.toggle('hidden', step < totalSteps);
        }

        function restoreFormState() {
            for (const key in formData) {
                if (key.endsWith('-btn')) {
                    const button = document.querySelector(`.${key}[data-value="${formData[key]}"]`);
                    if (button) button.click();
                }
            }
            if (formData['size-btn']) {
                updateSqftValue(formData['size-btn']);
            }
            if (formData['children-count']) {
                document.getElementById('children-count').textContent = formData['children-count'];
                updateCount('children-count', 0);
            }
            if (formData['couples-count']) {
                document.getElementById('couples-count').textContent = formData['couples-count'];
                updateCount('couples-count', 0);
            }
            if (formData['singles-count']) {
                document.getElementById('singles-count').textContent = formData['singles-count'];
                updateCount('singles-count', 0);
            }
        }

        // Voice input functionality (placeholder)
        function initVoiceInput() {
            if ('webkitSpeechRecognition' in window) {
                console.log('Voice input available');
            }
        }

        // Add this in your <script> tag in design_form_portal.html
document.querySelectorAll('input, select').forEach(el => {
    el.addEventListener('change', function() {
        // Collect all form data
        const formData = {};
        document.querySelectorAll('input, select').forEach(input => {
            if (input.type === 'radio') {
                if (input.checked) formData[input.name] = input.value;
            } else {
                formData[input.name] = input.value;
            }
        });
        // Save draft to backend
        fetch('/save_draft', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(formData)
        });
    });
});

        // Add this function inside your <script> tag
function updateFamilySizeFromComposition() {
    const children = parseInt(document.getElementById('children-count').textContent) || 0;
    const couples = parseInt(document.getElementById('couples-count').textContent) || 0;
    const singles = parseInt(document.getElementById('singles-count').textContent) || 0;
    const totalPeople = children + (couples * 2) + singles;

    // Find the appropriate family size button
    let targetValue = null;
    if (totalPeople >= 7) {
        targetValue = "7+";
    } else if (totalPeople >= 5) {
        targetValue = "5-6";
    } else if (totalPeople >= 3) {
        targetValue = "3-4";
    } else if (totalPeople >= 1) {
        targetValue = "1-2";
    }

    if (targetValue) {
        document.querySelectorAll('.family-size-btn').forEach(btn => {
            if (btn.getAttribute('data-value') === targetValue) {
                btn.classList.add('border-secondary', 'bg-secondary-50');
                btn.classList.remove('border-border');
                formData['family-size-btn'] = targetValue;
            } else {
                btn.classList.remove('border-secondary', 'bg-secondary-50');
                btn.classList.add('border-border');
            }
        });
    }
}

        // Event Listeners Setup
        document.addEventListener('DOMContentLoaded', function() {
            // Setup button selections
            setupButtonSelection('family-size-btn', 'data-value');
            setupButtonSelection('style-btn', 'data-value');
            setupButtonSelection('floor-btn', 'data-value', (value) => {
                document.getElementById('floors-dropdown-container').classList.toggle('hidden', value !== '4+');
            });

            // Populate floors dropdown
            const floorsDropdown = document.getElementById('floors-dropdown');
            if (floorsDropdown) {
                for (let i = 4; i <= 20; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `${i} Floors`;
                    floorsDropdown.appendChild(option);
                }
                floorsDropdown.addEventListener('change', () => formData['floor-btn'] = this.value);
            }

            // Slider listeners
            if (sqftSlider && sqftInput) {
                sqftSlider.addEventListener('input', () => updateSqftValue(sqftSlider.value));
                sqftInput.addEventListener('input', () => updateSqftValue(sqftInput.value));
                sqftInput.addEventListener('blur', () => {
                    let value = parseInt(sqftInput.value, 10);
                    const min = parseInt(sqftInput.min, 10);
                    const max = parseInt(sqftInput.max, 10);
                    if (isNaN(value)) value = min;
                    value = Math.max(min, Math.min(value, max));
                    updateSqftValue(value);
                });
            }

            // Navigation button handlers
            document.getElementById('next-btn').addEventListener('click', () => {
    if (currentStep < totalSteps) showStep(currentStep + 1);
});
            document.getElementById('prev-btn').addEventListener('click', () => { if (currentStep > 1) showStep(currentStep - 1); });

            // Form submission
            document.getElementById('generate-design-btn').addEventListener('click', function(e) {
    e.preventDefault();
    if (!validateFamilySizeAndComposition()) return;

    // Collect all relevant data from formData
    const designData = {
        area: formData['size-btn'],
        floors: formData['floor-btn'] === '4+' ? document.getElementById('floors-dropdown').value : formData['floor-btn'],
        style: formData['style-btn'],
        rooms: (
            parseInt(formData['children-count'] || 0) +
            (parseInt(formData['couples-count'] || 0) * 2) +
            parseInt(formData['singles-count'] || 0)
        )
    };

    // Save to localStorage
    localStorage.setItem('designData', JSON.stringify(designData));

    // Redirect to 2D design page using Flask route
    window.location.href = "{{ url_for('design_2d') }}";
});

            // Save draft functionality
            document.getElementById('save-draft-btn').addEventListener('click', function() {
                fetch("{{ url_for('save_draft') }}", {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        const originalText = this.textContent;
                        this.textContent = 'Saved!';
                        this.classList.add('text-success');
                        setTimeout(() => {
                            this.textContent = originalText;
                            this.classList.remove('text-success');
                        }, 2000);
                    } else {
                        alert(data.message);
                    }
                });
            });

            // Load draft data and initialize form
            const draftData = {{ draft_data|tojson|safe if draft_data else 'null' }};
            if (draftData) {
                delete draftData._id;
                delete draftData.user_email;
                formData = draftData;
            } else {
                if (sqftSlider) formData['size-btn'] = sqftSlider.value;
            }
            
            restoreFormState();
            showStep(1);
            initVoiceInput();
        });

function validateFamilySizeAndComposition() {
    // Get selected family size value
    let familySizeValue = null;
    document.querySelectorAll('.family-size-btn').forEach(btn => {
        if (btn.classList.contains('border-secondary')) {
            familySizeValue = btn.getAttribute('data-value');
        }
    });

    // Get composition counts and calculate total people
    const children = parseInt(document.getElementById('children-count').textContent) || 0;
    const couples = parseInt(document.getElementById('couples-count').textContent) || 0;
    const singles = parseInt(document.getElementById('singles-count').textContent) || 0;
    const compositionTotal = children + (couples * 2) + singles;

    if (!familySizeValue) {
        const msg = "Please select a family size.";
        document.getElementById('composition-warning').textContent = msg;
        document.getElementById('composition-warning').classList.remove('hidden');
        alert(msg);
        return false;
    }

    if (compositionTotal === 0) {
        const msg = "Please specify your family composition.";
        document.getElementById('composition-warning').textContent = msg;
        document.getElementById('composition-warning').classList.remove('hidden');
        alert(msg);
        return false;
    }

    // Parse the family size range
    let minSize, maxSize;
    if (familySizeValue.includes('-')) {
        [minSize, maxSize] = familySizeValue.split('-').map(Number);
    } else if (familySizeValue.includes('+')) {
        minSize = parseInt(familySizeValue);
        maxSize = Infinity;
    }

    // Compare
    if (compositionTotal < minSize || compositionTotal > maxSize) {
        const warningMessage = `The family composition total (${compositionTotal} people) does not match the selected family size range (${familySizeValue} people).`;
        document.getElementById('composition-warning').textContent = warningMessage;
        document.getElementById('composition-warning').classList.remove('hidden');
        alert(warningMessage);
        return false;
    } else{
        document.getElementById('composition-warning').classList.add('hidden');
        return true;
    }
}
    </script>
</body>
</html>
